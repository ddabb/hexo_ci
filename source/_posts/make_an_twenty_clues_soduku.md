---
title: 构造20个提示数的标准数独
date: 2018-12-21 21:19:16
toc: true
tags:
- 数独
categories:
- 数独之趣


---
# 序

最近在业余时间试图制作一个数独相关的小软件,包含生成标准数独的功能,但是在构造20个提示数的初盘的时候遇到了一些问题，故写下此文记录采取的一些方案。

# 构造数独
先参照[手写数独教程](https://www.60points.com/handwrite-soduku/)生成一个数独;  
再采取行替换,列替换的方式增加生成数独的随机性  
**我采取的是MathNet.Numerics中DenseMatrix的PermuteColumns和PermuteRows方法**，该处不做深入描述。

# 出题方案
## 方案一之靠运气
采取“挖空法”的方式, 随机清除掉完整数独中的(81-20)个数字,看是否能够生成唯一解。不行则重复该过程。  
**结论：该方案运气不好的情况下一个小时都没有办法甚至一整天都没法一个符合条件的20个提示数的标准数独**

## 方案二之减少冗余提示数
在进行方案一进行实验的时候,我发现若随机生成30个提示数，则很容易构成唯一解。  
若将具有30个提示数的数独记作初盘**A**。    
则其可能有效分解为具有29个提示数的初盘**A1**,**A2**。    
**A1**可能有效分解成具有28个提示数的出牌 **B1**,**B2**。  
假设初盘**A**删除某个位置**L**使**A**分解出来的29个提示数的初盘不具备唯一解。  
则多次分解之后的**K1**必须包含位置**L**。  
该过程可以采取**深度优先算法**实现。
**结论：该方案可以很好的生成提示数个数为23,24的标准数独,但是基本上很难获取到提示数个数为22以下的标准数独。**

## 方案三之减少冗余提示数优化
具有30个提示数的数独记作初盘**A**，  
对初盘**A**的元素进行依次清空动作,生成30个具有29个提示数的初盘**B1~B29**。  
若清除**L1**或者**L2**或者**L3**等不能构成标准数独。  
则最终的20个提示数的初盘必定包含位置**L1和L2和L3**。  
再结合方案二的深度优先算法进行运算  。
**结论：该方案即先做一遍广度优先搜索，再做多次深度优先搜索,因为优化了深度优先搜索的判定条件**  
**故找到22个提示数的标准数独的速度较方案二有较大提升**  
**但是生成20个提示数的数独的速度依然很慢。**  

## 方案四之排列组合
具有30个提示数的数独记作初盘**A**  
对初盘**A**的元素进行依次清空动作,生成30个具有29个提示数的初盘**B1~B29**。  
若初盘有任意19个数字不能删除，且任意删除其中一个之后的29个提示数的初盘必定多解,  
则最终20个提示数的初盘中一定包含这19个位置的数字。    
只需要从剩余(30-19)=11个位置中任选(20-19)=1个数字，构成11个20个数字的数独初盘,看是否存在标准数独。  
**结论：是唯一一个生成了20个提示数的标准数独的一种方案**  
**能否找到一个20个提示数的标准数独题还得看最初的30个提示数是否能降解成20个提示数的标准数独题**  
**<font color=#FF0000>该方案在试图找到23或者24个提示数的标准数独中性能最佳的。</font>**  

## 方案五之位置变化，数独变换
先固定要保留的位置，然后每次都重置完整的数独，直到数独初盘构成唯一解时，则停止。这样也有利于产生一些漂亮的图案。
如下图所示
![确认位置生成的数独](固定形状.png)

# 数独示例
以下是通过该工具生成的具有22个提示数的难度为7.2的数独
![数独示例](难度7.2.png)

# 总结

**<font color=#FF0000>数学基础永远都是高质量软件产品的前提条件。</font>**

# 致谢
@鹿暖，@楠竹 两个数学系的大学生协助复习数学上的知识。  
**QQ群全民数独007(106893459)**对我相关数独技巧问题的大力支持！

# 参考资料

* [C#实现排列、组合] (https://www.cnblogs.com/zhao-yi/p/8533035.html)
* [MathNet.Numerics 数学计算类](https://numerics.mathdotnet.com/)
* [C#源码](https://github.com/ddabb/soduku)